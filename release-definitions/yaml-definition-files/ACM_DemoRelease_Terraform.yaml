---
#Copyright 2022 Green River IT (GreenRiverIT.com) as described in LICENSE.txt distributed with this project on GitHub.
#Start at https://github.com/AgileCloudInstitute?tab=repositories
# Defines a release definition
name: Agile Cloud Manager Release -- Terraform
description: A Release Definition for creating infrastructure with the Agile Cloud Manager using Terraform
variables:
  - keySource: keyVault
    configFileDev: demoConfigDev.yaml
    configFileTest: demoConfigTest.yaml
environments:
  - name: Dev Environ Create
    deployPhases:
      - name: Setup Config for Dev Environment
        deploymentInput: 
          justAgentPool: True
        workflowTasks: 
          - name: Setup On
            type: Python
            scriptPath: "/home/packer/acm/agile-cloud-manager/controller/acm.py "
            arguments: "setup on sourceRepo=https://github.com/AgileCloudInstitute/acm-config-terraform-azbackend.git repoBranch=main"
          - name: Platform On
            type: Python
            scriptPath: "/home/packer/acm/agile-cloud-manager/controller/acm.py "
            arguments: "platform on "
          - name: Setup Off
            type: Python
            scriptPath: "/home/packer/acm/agile-cloud-manager/controller/acm.py "
            arguments: "setup off "
  - name: Dev Environ Destroy
    deployPhases:
      - name: Destroy Dev Environment 
        deploymentInput: 
          justAgentPool: True
        workflowTasks: 
          - name: Setup On
            type: Python
            scriptPath: "/home/packer/acm/agile-cloud-manager/controller/acm.py "
            arguments: "setup on sourceRepo=https://github.com/AgileCloudInstitute/acm-config-terraform-azbackend.git repoBranch=main"
          - name: Platform Off
            type: Python
            scriptPath: "/home/packer/acm/agile-cloud-manager/controller/acm.py "
            arguments: "platform off "
          - name: Setup Off
            type: Python
            scriptPath: "/home/packer/acm/agile-cloud-manager/controller/acm.py "
            arguments: "setup off "